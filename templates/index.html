{% extends "base.html" %}
{% block content %}

<div id="section-corpus" class="fade-in">
    <div class="row">
        <div class="col-md-3">
             <div class="card h-100">
                <div class="card-header">1. Seleccionar Corpus</div>
                <div class="card-body p-0 overflow-auto" style="max-height: 70vh;">
                    <ul id="corpusList" class="list-group list-group-flush"></ul>
                </div>
             </div>
        </div>

        <div class="col-md-5">
            <div class="card h-100">
                <div class="card-header d-flex justify-content-between align-items-center">
                    <span>2. Filtrar y Seleccionar Docs</span>
                    <span class="badge bg-secondary" id="docCountBadge">0</span>
                </div>
                <div class="card-body overflow-auto" id="documentsContainer" style="max-height: 70vh;">
                    <p class="text-muted text-center mt-5">Selecciona un corpus a la izquierda</p>
                </div>
            </div>
        </div>

        <div class="col-md-4">
            <div class="card bg-white">
                <div class="card-header text-success">3. Procesar</div>
                <div class="card-body">
                    <label class="form-label text-muted small">Corpus Activo</label>
                    <input type="text" id="selectedCorpus" class="form-control mb-3 fw-bold" readonly placeholder="Ninguno">
                    
                    <div class="d-grid gap-2">
                        <button id="processBtn" class="btn btn-success py-2">
                            <i class="bi bi-gear-wide-connected"></i> Generar Diccionario
                        </button>
                    </div>
                    
                    <div id="statusBox" class="mt-3 small text-muted">Esperando acción...</div>
                </div>
            </div>
            
            <div class="alert alert-info mt-3 small">
                <i class="bi bi-info-circle"></i> Selecciona documentos para crear un nuevo grafo semántico basado en co-ocurrencia.
            </div>
        </div>
    </div>
</div>

<div id="section-search" style="display: none;">
    <div class="row">
        <div class="col-md-4">
            <div class="card shadow-sm h-100">
                <div class="card-header bg-dark text-white d-flex justify-content-between">
                    <span><i class="bi bi-collection"></i> Biblioteca</span>
                    <button class="btn btn-sm btn-outline-light" onclick="loadDiccionarios()"><i class="bi bi-arrow-clockwise"></i></button>
                </div>
                <div class="card-body bg-light overflow-auto" style="max-height: 80vh;">
                    <div id="diccionariosListContainer" class="d-grid gap-3">
                        </div>
                </div>
            </div>
        </div>

        <div class="col-md-8">
            <div class="card mb-4 shadow-sm border-primary">
                <div class="card-body p-4">
                    <h5 class="card-title text-primary mb-3"><i class="bi bi-search"></i> Diccionario Inverso</h5>
                    <div class="input-group input-group-lg">
                        <textarea id="definitionInput" class="form-control" rows="2" placeholder="Escribe una definición (ej: 'Instrumento musical de cuerdas')..."></textarea>
                        <button id="searchBtn" class="btn btn-primary px-4">Buscar</button>
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-md-6">
                    <div class="card h-100">
                        <div class="card-header">Resultados</div>
                        <div class="card-body p-0">
                             <ol id="resultsList" class="list-group list-group-flush list-group-numbered"></ol>
                        </div>
                    </div>
                </div>
                
                <div class="col-md-6">
                    <div class="card h-100">
                        <div class="card-header">Estadísticas del Grafo</div>
                        <div class="card-body">
                             <div id="graphSummary" class="mb-2 text-muted small">Carga un diccionario...</div>
                             <div id="graphView" class="border rounded p-2 bg-light" style="height: 250px; overflow: auto;"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

{% endblock %}  